<!DOCTYPE html>
<html>
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="viewport" content="initial-scale=1, maximum-scale=1">

  <link rel="stylesheet" href="https://code.jquery.com/ui/1.13.2/themes/base/jquery-ui.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@tarekraafat/autocomplete.js@10.2.7/dist/css/autoComplete.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.datatables.net/1.13.1/css/jquery.dataTables.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css" integrity="sha512-MV7K8+y+gLIBoVD59lQIYicR65iaqukzvf/nwasF0nqhPay5w/9lJmVM2hMDcnK1OnMGCdVK+iQrJ7lzPJQd1w==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link rel="stylesheet" href="/css/charts_style.css">
  <link rel="stylesheet" type="text/css" href="/css/common-style.css">
  <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/fixedheader/3.4.0/css/fixedHeader.dataTables.min.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/2.9.2/umd/popper.min.js"></script>
  <script src="https://code.jquery.com/jquery-3.6.0.js"></script>
  <script src="https://code.jquery.com/ui/1.13.2/jquery-ui.js"></script>
  <script src="https://cdn.datatables.net/1.13.1/js/jquery.dataTables.min.js"></script>
  <script src="https://cdn.datatables.net/fixedheader/3.4.0/js/dataTables.fixedHeader.min.js" type="text/javascript"></script> 
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@tarekraafat/autocomplete.js@10.2.7/dist/autoComplete.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.min.js" ></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@tarekraafat/autocomplete.js@10.2.7/dist/autoComplete.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns/dist/chartjs-adapter-date-fns.bundle.min.js"></script>
  <script src="/js/common.js" ></script>
  <script src="/js/charts-common.js"></script>
  <script src="/js/portfolio.js" ></script>

  <title>Portfolio</title>
</head>
<body>

<div th:replace="~{fragments/navbar :: my_fragment(active='portfolio')}"></div>
<div class="clearFloat"></div>

<span style="display:none" id="onlyOwned" th:text="${onlyOwned}"></span>

<div id="content">

  <h1>Portfolio</h1>

  <div id="watchlist-table"></div>
  
  <h3  style="margin-top:40px">Summary</h3>
  
  <div class="general-portfolio-pie-chart"><canvas id="investments-chart" ></canvas></div>
  <div class="general-portfolio-pie-chart"><canvas id="industry-chart" ></canvas></div>
  <div class="general-portfolio-pie-chart"><canvas id="sector-chart"></canvas></div>
  <div class="general-portfolio-pie-chart"><canvas id="cap-chart"></canvas></div>
  <div class="general-portfolio-pie-chart"><canvas id="country-chart"></canvas></div>
  <div class="general-portfolio-pie-chart"><canvas id="profitability-chart"></canvas></div>
  <div class="general-portfolio-pie-chart"><canvas id="pe-chart"></canvas></div>
  <div class="general-portfolio-pie-chart"><canvas id="pfcf-chart"></canvas></div>

<div style="clear:both"></div>
  <h3  style="margin-top:40px">Fundamentals pie chart</h3>
  <div class="general-portfolio-pie-chart"><canvas id="roic-chart" ></canvas></div>
  <div class="general-portfolio-pie-chart"><canvas id="sharechange-chart" ></canvas></div>
  <div class="general-portfolio-pie-chart"><canvas id="altman-chart"></canvas></div>
  <div class="general-portfolio-pie-chart"><canvas id="growth-chart"></canvas></div>
  <div class="general-portfolio-pie-chart"><canvas id="icr-chart"></canvas></div>
  <div class="general-portfolio-pie-chart"><canvas id="grossmargin-chart"></canvas></div>
  <div class="general-portfolio-pie-chart"><canvas id="piotrosky-chart"></canvas></div>
  <div class="general-portfolio-pie-chart"><canvas id="investment-score-chart"></canvas></div>
 
  <div style="clear:both"></div>
  <h3  style="margin-top:40px">Portfolio info <a style="font-size: 11pt; margin-bottom: 10px; position: relative; top: -4px;" href="/portfolio-compare">Compare</a></h3> 
  <div class="general-portfolio-data single-number-chart">
    <div>Total</div>
    <div id="total"  class="value"></div>
  </div>
  <div class="general-portfolio-data single-number-chart">
    <div># of stocks</div>
    <div id="stock-count"  class="value"></div>
  </div>
  <div class="general-portfolio-data single-number-chart">
    <div>1yr EPS</div>
    <div id="total-earnings"  class="value"></div>
  </div>
  <div class="general-portfolio-data single-number-chart">
    <div>1yr FCF</div>
    <div id="total-fcf"  class="value"></div>
  </div>
  <div class="general-portfolio-data single-number-chart">
    <div>Dividend</div>
    <div id="total-dividend"  class="value"></div>
  </div>
  <div class="general-portfolio-data single-number-chart">
    <div>Total PE</div>
    <div id="total-pe"  class="value"></div>
  </div>
  <div class="general-portfolio-data single-number-chart">
    <div>Total Price to FCF</div>
    <div id="total-pfcf"  class="value"></div>
  </div>
  <div class="general-portfolio-data single-number-chart">
    <div>Total equity</div>
    <div id="total-net-assets"  class="value"></div>
  </div>
  
  <div style="clear:both; margin-bottom: 50px;"></div>
  
  
  <div class="general-portfolio-data single-number-chart">
    <div>Revenue growth</div>
    <div id="total-rev-growth"  class="value"></div>
  </div>
  <div class="general-portfolio-data single-number-chart">
    <div>EPS growth</div>
    <div id="total-eps-growth"  class="value"></div>
  </div>
  <div class="general-portfolio-data single-number-chart">
    <div>ROIC</div>
    <div id="total-roic"  class="value"></div>
  </div>
  <div class="general-portfolio-data single-number-chart">
    <div>Altman</div>
    <div id="total-altman"  class="value"></div>
  </div>
  <div class="general-portfolio-data single-number-chart">
    <div>Total share change</div>
    <div id="total-share-change"  class="value"></div>
  </div>
  <div class="general-portfolio-data single-number-chart">
    <div>Total operating margin</div>
    <div id="total-op-margin"  class="value"></div>
  </div>
  <div class="general-portfolio-data single-number-chart">
    <div>Debt to equity</div>
    <div id="total-d2e"  class="value"></div>
  </div>
  <div class="general-portfolio-data single-number-chart">
    <div>Investment score</div>
    <div id="total-is"  class="value"></div>
  </div>
  
  <div style="clear:both; margin-bottom: 50px;"></div>
  
  <div class="general-portfolio-data single-number-chart">
    <div>1yr returns</div>
    <div id="one-year-returns"  class="value"></div>
  </div>
  <div class="general-portfolio-data single-number-chart">
    <div>2yr returns</div>
    <div id="two-year-returns"  class="value"></div>
  </div>
  <div class="general-portfolio-data single-number-chart">
    <div>3yr returns</div>
    <div id="three-year-returns"  class="value"></div>
  </div>
  <div class="general-portfolio-data single-number-chart">
    <div>5yr returns</div>
    <div id="five-year-returns"  class="value"></div>
  </div>
  <div class="general-portfolio-data single-number-chart">
    <div>10yr returns</div>
    <div id="ten-year-returns"  class="value"></div>
  </div>
  <div class="general-portfolio-data single-number-chart">
    <div>15yr returns</div>
    <div id="fifteen-year-returns"  class="value"></div>
  </div>
  <div class="general-portfolio-data single-number-chart">
    <div>20yr returns</div>
    <div id="twenty-year-returns"  class="value"></div>
  </div>
  <div class="general-portfolio-data single-number-chart">
    <div>10yr expected dcf returns</div>
    <div id="expected-returns" class="value"></div>
  </div>
  
  <div style="clear:both"></div>
  
  
  <div th:if="${isLoggedIn}">
  <h3 style="margin-top:40px">Historical performance</h3>
  <div id="charts"></div>
  </div>
  
  <h3 style="margin-top:40px">Annualized returns</h3>
  <div id="returns-table"></div>
  

  <script th:if="${isLoggedIn}">
     onlyOwned = $("#onlyOwned").text();
    
     fetch('/portfoliodata?onlyOwned=' + onlyOwned, {
        method: 'GET',
        headers: {
          'Accept': 'application/json',
        },
      }).then(res => {
         return res.json();
      }).then(data => {
        addPortfolio(data, {reorder: true});
      });
  
  
  </script>
<script src="/js/autocomplete.js"></script>

</div>

<span id="accountType" style="display:none" th:text="${accountType}"></span>
<div th:replace="~{fragments/jwt-refresher :: jwt_refresher}"></div>
<span id="allowed" style="display:none" th:text="${allowed}"></span>
<span id="accountType" style="display:none" th:text="${accountType}"></span>
<span id="viewLimit" style="display:none" th:text="${viewLimit}"></span>
<div th:replace="~{fragments/content-blocking-modal}"></div>
<div th:replace="~{fragments/general-message-modal}"></div>

</body>
</html>
